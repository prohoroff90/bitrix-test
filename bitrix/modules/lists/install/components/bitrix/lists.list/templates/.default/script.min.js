BX.ListClass=function(){var e=function(e){this.ajaxUrl="/bitrix/components/bitrix/lists.list/ajax.php";this.iblockTypeId=e.iblockTypeId;this.iblockId=e.iblockId;this.sectionId=e.sectionId;this.randomString=e.randomString};e.prototype.removeElement=function(e){return e.parentNode?e.parentNode.removeChild(e):e};e.prototype.addToLinkParam=function(e,t,o){if(!e.length){return"?"+t+"="+o}e=BX.util.remove_url_param(e,t);if(e.indexOf("?")!=-1){return e+"&"+t+"="+o}return e+"?"+t+"="+o};e.prototype.showModalWithStatusAction=function(e,t){e=e||{};if(!e.message){if(e.status=="success"){e.message=BX.message("LISTS_LCP_TEMPLATE_STATUS_ACTION_SUCCESS")}else{e.message=BX.message("LISTS_LCP_TEMPLATE_STATUS_ACTION_ERROR")+". "+this.getFirstErrorFromResponse(e)}}var o=BX.create("div",{props:{className:"bx-lists-alert"},children:[BX.create("span",{props:{className:"bx-lists-aligner"}}),BX.create("span",{props:{className:"bx-lists-alert-text"},text:e.message}),BX.create("div",{props:{className:"bx-lists-alert-footer"}})]});var s=BX.PopupWindowManager.getCurrentPopup();if(s){s.destroy()}var n=setTimeout(function(){var e=BX.PopupWindowManager.getCurrentPopup();if(!e||e.uniquePopupId!="bx-lists-status-action"){return}e.close();e.destroy()},2e3);var i=BX.PopupWindowManager.create("bx-lists-status-action",null,{content:o,onPopupClose:function(){this.destroy();clearTimeout(n)},autoHide:true,zIndex:2e3,className:"bx-lists-alert-popup"});i.show();BX("bx-lists-status-action").onmouseover=function(e){clearTimeout(n)};BX("bx-lists-status-action").onmouseout=function(e){n=setTimeout(function(){var e=BX.PopupWindowManager.getCurrentPopup();if(!e||e.uniquePopupId!="bx-lists-status-action"){return}e.close();e.destroy()},2e3)}};e.prototype.show=function(e){if(this.getRealDisplay(e)!="none")return;var t=e.getAttribute("displayOld");e.style.display=t||"";if(this.getRealDisplay(e)==="none"){var o=e.nodeName,s=document.body,n;if(displayCache[o]){n=displayCache[o]}else{var i=document.createElement(o);s.appendChild(i);n=this.getRealDisplay(i);if(n==="none"){n="block"}s.removeChild(i);displayCache[o]=n}e.setAttribute("displayOld",n);e.style.display=n}};e.prototype.hide=function(e){if(!e.getAttribute("displayOld")){e.setAttribute("displayOld",e.style.display)}e.style.display="none"};e.prototype.getRealDisplay=function(e){if(e.currentStyle){return e.currentStyle.display}else if(window.getComputedStyle){var t=window.getComputedStyle(e,null);return t.getPropertyValue("display")}};e.prototype.modalWindow=function(e){e=e||{};e.title=e.title||false;e.bindElement=e.bindElement||null;e.overlay=typeof e.overlay=="undefined"?true:e.overlay;e.autoHide=e.autoHide||false;e.closeIcon=typeof e.closeIcon=="undefined"?{right:"20px",top:"10px"}:e.closeIcon;e.modalId=e.modalId||"lists_modal_window_"+(Math.random()*(2e5-100)+100);e.withoutContentWrap=typeof e.withoutContentWrap=="undefined"?false:e.withoutContentWrap;e.contentClassName=e.contentClassName||"";e.contentStyle=e.contentStyle||{};e.content=e.content||[];e.buttons=e.buttons||false;e.events=e.events||{};e.withoutWindowManager=!!e.withoutWindowManager||false;var t=[];if(e.title){t.push(BX.create("div",{props:{className:"bx-lists-popup-title"},text:e.title}))}if(e.withoutContentWrap){t=t.concat(e.content)}else{t.push(BX.create("div",{props:{className:"bx-lists-popup-content "+e.contentClassName},style:e.contentStyle,children:e.content}))}var o=[];if(e.buttons){for(var s in e.buttons){if(!e.buttons.hasOwnProperty(s)){continue}if(s>0){o.push(BX.create("SPAN",{html:"&nbsp;"}))}o.push(e.buttons[s])}t.push(BX.create("div",{props:{className:"bx-lists-popup-buttons"},children:o}))}var n=BX.create("div",{props:{className:"bx-lists-popup-container"},children:t});e.events.onPopupShow=BX.delegate(function(){if(o.length){firstButtonInModalWindow=o[0];BX.bind(document,"keydown",BX.proxy(this._keyPress,this))}if(e.events.onPopupShow)BX.delegate(e.events.onPopupShow,BX.proxy_context)},this);var i=e.events.onPopupClose;e.events.onPopupClose=BX.delegate(function(){firstButtonInModalWindow=null;try{BX.unbind(document,"keydown",BX.proxy(this._keypress,this))}catch(t){}if(i){BX.delegate(i,BX.proxy_context)()}if(e.withoutWindowManager){delete windowsWithoutManager[e.modalId]}BX.proxy_context.destroy()},this);var a;if(e.withoutWindowManager){if(!!windowsWithoutManager[e.modalId]){return windowsWithoutManager[e.modalId]}a=new BX.PopupWindow(e.modalId,e.bindElement,{content:n,closeByEsc:true,closeIcon:e.closeIcon,autoHide:e.autoHide,overlay:e.overlay,events:e.events,buttons:[],zIndex:isNaN(e["zIndex"])?0:e.zIndex});windowsWithoutManager[e.modalId]=a}else{a=BX.PopupWindowManager.create(e.modalId,e.bindElement,{content:n,closeByEsc:true,closeIcon:e.closeIcon,autoHide:e.autoHide,overlay:e.overlay,events:e.events,buttons:[],zIndex:isNaN(e["zIndex"])?0:e.zIndex})}a.show();return a};e.prototype.performActionBp=function(e,t,o){BX.ajax({method:"POST",dataType:"json",url:this.addToLinkParam(this.ajaxUrl,"action","performActionBp"),data:{iblockTypeId:this.iblockTypeId,iblockId:this.iblockId,sectionId:this.sectionId,workflowId:e,elementId:t,action:o,sessid:BX.bitrix_sessid()},onsuccess:BX.delegate(function(e){if(e.status=="success"){this.showModalWithStatusAction({status:"success",message:e.message});setTimeout("location.reload()",2e3)}else{e.errors=e.errors||[{}];this.showModalWithStatusAction({status:"error",message:e.errors.pop().message})}},this)})};return e}();
//# sourceMappingURL=script.map.js